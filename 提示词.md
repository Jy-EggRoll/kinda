# 项目开发规范

我正在开发一个以学习与交互为核心的单页面网站，整体要求清晰明确：左侧为文本上传与管理面板，右侧为 AI 根据上传文本生成的交互式学习卡片区。以下为详尽规范与实现约束，便于 AI 编程模型基于原生技术快速落地。

## 功能与布局

- 左侧上传面板：应支持粘贴文本（现在也仅需要支持纯文本传输），上传后触发 AI 分析流程。面板须支持折叠/展开功能，折叠后保留最小化入口（例如一个图标或小按钮）以便快速恢复。折叠与展开状态需可通过键盘与触摸操作控制，且在不同屏幕尺寸下均能良好工作（响应式）。
- 右侧展示区：以卡片（card）为基本单元展示 AI 生成的练习题与交互内容。卡片须支持多种尺寸（大卡用于主题与长题目、小卡用于提示或补充信息），并在层级、入场与悬停动画上做协调，以提升引导性与学习流畅度。

## 题型与交互要求

- 卡片内应包含多样题型：选择题、判断题、填空题、拖放配对等；题目风格应有趣且具有适当挑战性以激发学习兴趣。每张卡片必须包含：题目描述、候选项（如适用）、提交按钮、反馈展示区及解析说明。
- 反馈机制：答对时提供明显正向视觉反馈（颜色、图标、得分动画等）；答错时提供建设性提示与解析，必要时给出引导性提示或分步讲解。
- 交互细节：提交后禁用重复提交直到展示结果或允许重做；支持键盘导航（Tab/Enter/Space）与触摸操作；动画时长与节奏应参数化以便调优（例如 150–300ms 入场，300–500ms 强化反馈等）。

## 技术与实现约束

- 禁止使用任何前端框架（例如 React、Vue、Angular 等）。前端必须使用原生 HTML 与纯 JavaScript（或事先编译的 TypeScript 输出），并且只能使用 Tailwind CSS 的 CDN 版本进行样式控制。严禁编写任何标准 CSS：不允许外部样式表、内联样式或嵌入式 <style> 标签。
- 仅可通过 Tailwind CDN 引入样式。若需自定义颜色或主题，优先使用 Tailwind 的实用类与 Catppuccin 提供的 CSS/调色包（通过 CDN），避免引入本地 CSS 文件或其他样式库。
- 配色：必须采用 Catppuccin 主题以保持界面一致性与美感。推荐通过 jsDelivr 引入：
  - https://cdn.jsdelivr.net/npm/@catppuccin/palette
  - https://cdn.jsdelivr.net/npm/@catppuccin/css

## AI 与密钥管理

- 大模型调用：可以在前端或后端通过 JavaScript 对接大模型 API，并对返回的文本进行解析以生成题目与交互内容。优先建议将密钥放在后端并通过受控接口调用，以避免前端暴露。
- 项目根目录中存在名为 `api` 的文件用于存放调用大模型所需的密钥（开发环境或本地测试时使用）。务必确保该文件已加入 `.gitignore`，禁止将密钥提交到版本控制；在代码中读取该文件时仅在后端环境使用，切勿将其内容直接注入到客户端代码或公共资源中。
- 安全提示：对模型返回的内容应做输出校验与限制（例如长度、HTML 转义等），避免直接注入未过滤的富文本导致安全问题。

## 性能

- 性能：对卡片入场/出场动画进行合适节流与硬件加速（使用 transform/opacity 而非 layout 触发属性），并提供低性能模式以禁用或简化动画，避免在低端设备出现卡顿。
- 响应式与适配：在不同视窗宽度下合理折叠左侧面板，并保证右侧卡片网格在手机、平板、桌面三类设备上都有良好展示与可操作性。

## 再次强调

- 严禁引入任何除 Tailwind CDN 与 Catppuccin CDN 之外的样式依赖；如需额外脚本库（例如用于拖放或无障碍增强），请在设计评审阶段明确理由并优先采用小而可审计的纯 JS 库。

## 目录结构

需要遵循最佳实践：

index.html          # 主 HTML 文件
js 文件夹         # 存放所有 JavaScript 代码
  ├── app.js         # 主应用逻辑
  ├── ai.js          # AI 调用与处理逻辑
  └── ui.js          # 界面交互与动画逻辑

再次强调，禁止任何 CSS 文件或样式标签的存在！

我使用 pnpm 作为包管理器。
